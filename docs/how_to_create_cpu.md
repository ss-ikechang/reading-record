# 概要

## 本

- [CPUの創りかた | 渡波 郁](https://amzn.to/31iMqeQ)

## かかった時間

- xx 時間

## 読む前の状態

- 低レイヤの 1 冊目として読んだ

## 読む前後の変化

- xx

## まだわからないこと

- xx

# 詳細メモ

## 1章: はじめの一歩のその前に

- ここで単純化した CPU を作ることを目標にするが、基本的な動作自体は一般的な CPU と同じ
  - プログラムカウンターに従って、命令をメモリーから読み出す（命令フェッチ）
  - 命令を解読（デコード）
  - デコード結果に従い、実際の演算を行う（実行）
  - 演算結果を格納（ストア）
- 各装備
  - セラミックコンデンサ: 応答速度は速いが、容量は小さい
  - 電解コンデンサ: 応答速度は悪いが、大きな容量が安価に得られる
  - ダイオード:「電気の一方通行」デバイス

## 2章: LED

- オームの法則
  - E = IR（電圧 V = 電流 A * 抵抗 Ω）
  - P = IE（電力 W = 電流 A * 電圧 V）
- LED: Light Emitted Diode。発光ダイオード
  - ダイオードなので電流は一方通行となる
  - アノードがプラス側（図だと三角形の方、足の長い方）、カソードがマイナス（図だと線の方）
  - 電源と LED だけだと、電流が無制限になるので、抵抗もつなげればよい

## 3章: デジタル回路の基礎の基礎

- 汎用 IC: 様々な論理回路に共通して必要とされる個々の機能を 1 つの小型パッケージにまとめた集積回路
- 専用 IC: 特定の用途に特化した集積回路
- CPLD / FPGA は「回路を自由にプログラム可能なロジック IC」なので、必要な回路そのものをプログラムできる
- 1 と 0 の表現
  - 電圧が高い（5V）場合を High、電圧が低い（0V）場合を Low
  - High に 1 を割り当てる場合を「正論理」、Low に 1 を割り当てる場合を「負論理」という
  - 回路図上で、上にバーがある場合は負論理
  - 74HC シリーズの場合、H は 4.4V 以上、L は 0.3V 以下
- 簡単な論理回路
  - NOT は 74HC04、OR は 74HC32、3 入力 NAND は 74HC10
  - DIP: Dual Inline Package。長方形のパッケージの双方の長辺に 2 列の足を配置したもの
- 実際の回路
  - 使わない入力ピンは H か L に固定する
  - Vcc に +5V を接続すればいい
  - IC の近くに 0.1μF 程度の積層セラミックコンデンサを配置する
  - 電解コンデンサには極性があるので注意。基板に 1 つ、100μF 程度の電解コンデンサを配置する
  - IC への電源の配線の表記は省略されているので注意
  - 電源の配線は網目のように行う。電源パターン付きのユニバーサル基板が便利

## 4章: リセットとクロック回路

- 手動クロック回路: 手動で H と L を出力する回路
- プルアップ抵抗
  - スイッチを切り替える時に、一瞬だけ CLOCK 信号は GND にも 5V にもつながっていない状態（オープン）になる
  - すると電圧が不定になってしまうので、これを防ぐために、CLOCK 信号を抵抗で 5V（Vcc）につないでおく
  - このような抵抗を「プルアップ抵抗」という。逆に低い電位で保っておく抵抗を「プルダウン抵抗」という
- チャタリングの問題
  - スイッチが接触する瞬間は、激しくバウンドが起きる。このバウンドを「チャタリング」という
  - スイッチはバウンドした回数だけ、入力されたと認識してしまうため、対応が必要
  - これに対応するのが CR のフィルタ（C がコンデンサ、R が抵抗）。回路の応答を遅くすることで解決する
- デジタル IC では中途半端な電圧（0V は L、5V は H だが、2V とか 3V の場合）でも H か L に判定される
  - ゆっくり電圧が上昇する場合は、出力が不安定になる
  - デジタル IC の中でも中途半端な電圧を扱えるものがいて、それが 74HC14 シュミットトリガ・インバーター
- リセット回路
  - ここでは L でリセットがかかる仕様とする（電源を ON にしたら、一時的に L を出力する回路にすればよい）
- クロックジェネレータ
  - ここで作るクロックは 1Hz とする
  - 抵抗を 33KΩ、コンデンサを 10μF とすると発信周期がおおよそ 1Hz となる
  - 抵抗を 3.3KΩ にするとクロックを 10Hz にできる
  - ここで使うコンデンサはプラスにもマイナスにも充電されるので、無極性電解コンデンサを使用する
